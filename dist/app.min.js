!function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(2),u=n(s),a=o(4),c=n(a),l=function(){function t(){var e=this;i(this,t),t._instance=this,this.tiles=[new Array(4),new Array(4),new Array(4),new Array(4)],this.count=0,this.score=0;var o=localStorage.getItem("bastScore");this.bastScore=o||0,this.randomTile(),this.randomTile(),this.scoreDom=document.querySelector("#score"),this.bastScoreDom=document.querySelector("#bast-score"),this.scoreDom.innerHTML=0,this.bastScoreDom.innerHTML=this.bastScore;var n=new c.default;n.on("up",this.up.bind(this)),n.on("left",this.left.bind(this)),n.on("right",this.right.bind(this)),n.on("down",this.down.bind(this)),n.on("all",function(){setTimeout(function(){e.randomTile()},100)})}return r(t,null,[{key:"getInstance",value:function(){return t._instance}}]),r(t,[{key:"up",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)this.tiles[t][e]&&this.tiles[t][e].moveToTop()}},{key:"left",value:function(){for(var t=0;t<4;t++)for(var e=0;e<4;e++)this.tiles[t][e]&&this.tiles[t][e].moveToLeft()}},{key:"right",value:function(){for(var t=0;t<4;t++)for(var e=3;e>=0;e--)this.tiles[t][e]&&this.tiles[t][e].moveToRight()}},{key:"down",value:function(){for(var t=3;t>=0;t--)for(var e=0;e<4;e++)this.tiles[t][e]&&this.tiles[t][e].moveToDown()}},{key:"randomTile",value:function(){if(16!==this.count)for(var t=Math.floor(100*Math.random()%(16-this.count)),e=0,o=0;o<4;o++)for(var n=0;n<4;n++)void 0==this.tiles[o][n]&&(e==t&&(this.tiles[o][n]=new u.default(o,n,t%2==0?2:4),this.count++),e++)}},{key:"addScore",value:function(t){this.score+=t,this.scoreDom.innerHTML=this.score,this.score>this.bastScore&&(this.bastScore=this.score,this.bastScoreDom.innerHTML=this.bastScore,localStorage.setItem("bastScore",this.bastScore))}}]),t}();e.default=l},function(t,e,o){"use strict";var n=o(0),i=function(t){return t&&t.__esModule?t:{default:t}}(n);document.addEventListener("touchmove",function(t){t.preventDefault()});try{new i.default}catch(t){alert(t)}},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),a=o(3),c=[{fontSize:55,color:"#726C62",bgColor:"#EFE7DE"},{fontSize:55,color:"#726C62",bgColor:"#EFE3CE"},{fontSize:55,color:"#fff",bgColor:"#F7B27B"},{fontSize:46,color:"#fff",bgColor:"#F79663"},{fontSize:46,color:"#fff",bgColor:"#F77D63"},{fontSize:46,color:"#fff",bgColor:"#F76142"},{fontSize:40,color:"#fff",bgColor:"#F76142"},{fontSize:40,color:"#fff",bgColor:"#F29A39"},{fontSize:40,color:"#fff",bgColor:"#E7CB5A"},{fontSize:32,color:"#fff",bgColor:"#E7C74A"},{fontSize:32,color:"#fff",bgColor:"#EFC229"}],l=document.querySelector(".grid-cell"),f=l.offsetWidth,h=parseInt(document.defaultView.getComputedStyle(l,null).marginRight);10==h&&(c.forEach(function(t){t.fontSize=t.fontSize/2}),f=57.5);var d=function(){function t(e,o,i){n(this,t),this.x=e,this.y=o,this.setNum(i),this.render()}return r(t,[{key:"gridToPx",value:function(t,e){return{top:t*f+t*h,left:e*f+e*h}}},{key:"moveTo",value:function(t,e){var o=u.default.getInstance().tiles,n=this.gridToPx(t,e),i=n.left,r=n.top;this.tileDom.style.transform="translate("+i+"px, "+r+"px)",this.x==t&&this.y==e||(o[this.x][this.y]=null,o[t][e]=this),this.x=t,this.y=e}},{key:"scale",value:function(){var t=this,e=function e(){t.tileDom.children[0].style.animation="scale .2s",t.tileDom.removeEventListener("transitionend",e)};this.tileDom.addEventListener("transitionend",e)}},{key:"setNum",value:function(t){var e=Math.log2(t)-1;if(this.backgroundColor=c[e].bgColor,this.color=c[e].color,this.fontSize=c[e].fontSize,this.num){var o=this.tileDom.children[0];o.style.backgroundColor=this.backgroundColor,o.style.color=this.color,o.style.fontSize=this.fontSize,o.innerHTML=t}this.num=t}},{key:"merge",value:function(t){u.default.getInstance().addScore(2*t.num),t.moveTo(this.x,this.y),t.setNum(2*t.num),t.scale(),this.remove()}},{key:"remove",value:function(){u.default.getInstance().tiles;this.tileDom.remove(),u.default.getInstance().count--}},{key:"moveToRight",value:function(){if(3!=this.y){for(var t=u.default.getInstance().tiles,e=this.y+1;e<4;e++)if(null!=t[this.x][e])return t[this.x][e].num==this.num?void t[this.x][e].merge(this):void this.moveTo(this.x,e-1);this.moveTo(this.x,3)}}},{key:"moveToLeft",value:function(){if(0!=this.y){for(var t=u.default.getInstance().tiles,e=this.y-1;e>=0;e--)if(null!=t[this.x][e])return t[this.x][e].num==this.num?void t[this.x][e].merge(this):void this.moveTo(this.x,e+1);this.moveTo(this.x,0)}}},{key:"moveToTop",value:function(){if(0!=this.x){for(var t=u.default.getInstance().tiles,e=this.x-1;e>=0;e--)if(null!=t[e][this.y])return t[e][this.y].num==this.num?void t[e][this.y].merge(this):void this.moveTo(e+1,this.y);this.moveTo(0,this.y)}}},{key:"moveToDown",value:function(){if(3!=this.x){for(var t=u.default.getInstance().tiles,e=this.x+1;e<4;e++)if(null!=t[e][this.y])return t[e][this.y].num==this.num?void t[e][this.y].merge(this):void this.moveTo(e-1,this.y);this.moveTo(3,this.y)}}},{key:"render",value:function(t){var e=void 0;switch(void 0===t?"undefined":i(t)){case"string":e=document.querySelector(t);break;case"object":e=t;break;case"undefined":e=document.querySelector("#tile-list")}var o="\n      <div class=\"tile-wrapper\">\n        <div class='tile' style='background-color: "+this.backgroundColor+";font-size: "+this.fontSize+"px; color: "+this.color+";'>\n          "+this.num+"\n        </div>\n      </div>\n    ";return this.tileDom=(0,a.strToDom)(o),this.tileDom.children[0].addEventListener("animationend",function(t){t.target.style.animation=""}),this.moveTo(this.x,this.y),e.appendChild(this.tileDom),this.scale(),this}}]),t}();e.default=d},function(t,e,o){"use strict";function n(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}Object.defineProperty(e,"__esModule",{value:!0}),e.strToDom=n},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=function(){function t(){n(this,t),this.cbs={up:[],down:[],left:[],right:[],all:[]},this.mouseLastPoint=null;var e=document.querySelector("#game-container");e.addEventListener("mousedown",this.onTouchStart.bind(this)),e.addEventListener("mouseup",this.onTouchEnd.bind(this)),e.addEventListener("touchstart",this.onTouchStart.bind(this)),e.addEventListener("touchend",this.onTouchEnd.bind(this))}return i(t,[{key:"on",value:function(t,e){this.cbs.hasOwnProperty(t)&&this.cbs[t].push(e)}},{key:"onTouchStart",value:function(t){this.mouseLastPoint={x:t.pageX?t.pageX:event.changedTouches[0].clientX,y:t.pageY?t.pageY:event.changedTouches[0].clientY}}},{key:"onTouchEnd",value:function(t){if(this.mouseLastPoint){var e=(t.pageX?t.pageX:event.changedTouches[0].clientX)-this.mouseLastPoint.x,o=(t.pageY?t.pageY:event.changedTouches[0].clientY)-this.mouseLastPoint.y;0==e&&0==o||(Math.abs(e)>Math.abs(o)?e>0?this.cbs.right.forEach(function(t){return t()}):this.cbs.left.forEach(function(t){return t()}):o>0?this.cbs.down.forEach(function(t){return t()}):this.cbs.up.forEach(function(t){return t()}),this.cbs.all.forEach(function(t){return t()}),this.mouseLastPoint=null)}}}]),t}();e.default=r}]);
//# sourceMappingURL=app.min.js.map