{"version":3,"sources":["webpack:///app.min.js","webpack:///webpack/bootstrap 7d071495d469ea207ab9","webpack:///./src/Game.js","webpack:///./src/index.js","webpack:///./src/Tile.js","webpack:///./src/utils.js","webpack:///./src/FetchDir.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_interopRequireDefault","obj","default","_classCallCheck","instance","Constructor","TypeError","value","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_Tile","_Tile2","_FetchDir","_FetchDir2","Game","_this","this","_instance","tiles","Array","count","score","bastScore","localStorage","getItem","randomTile","scoreDom","document","querySelector","bastScoreDom","innerHTML","fetchDir","on","up","bind","left","right","down","setTimeout","x","y","moveToTop","moveToLeft","moveToRight","moveToDown","num","Math","floor","random","j","undefined","setItem","_Game","_Game2","addEventListener","e","preventDefault","alert","_typeof","Symbol","iterator","constructor","_utils","colors","fontSize","color","bgColor","block","size","offsetWidth","step","parseInt","defaultView","getComputedStyle","forEach","item","Tile","setNum","render","top","getInstance","_gridToPx","gridToPx","tileDom","style","transform","addAnimation","children","animation","removeEventListener","newNum","index","log2","backgroundColor","innerDom","targetTile","addScore","moveTo","scale","remove","merge","root","rootDom","domStr","strToDom","appendChild","dom","createElement","FetchDir","cbs","all","mouseLastPoint","checkerboardDom","onTouchStart","onTouchEnd","actionName","cb","push","pageX","event","changedTouches","clientX","pageY","clientY","dx","dy","abs","fn"],"mappings":"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","file":"app.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Tile = __webpack_require__(2);\n\nvar _Tile2 = _interopRequireDefault(_Tile);\n\nvar _FetchDir = __webpack_require__(4);\n\nvar _FetchDir2 = _interopRequireDefault(_FetchDir);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Game = function () {\n    _createClass(Game, null, [{\n        key: 'getInstance',\n        value: function getInstance() {\n            return Game._instance;\n        }\n    }]);\n\n    function Game() {\n        var _this = this;\n\n        _classCallCheck(this, Game);\n\n        Game._instance = this;\n        this.tiles = [new Array(4), new Array(4), new Array(4), new Array(4)];\n\n        this.count = 0;\n\n        this.score = 0;\n\n        var bastScore = localStorage.getItem('bastScore');\n        this.bastScore = bastScore ? bastScore : 0;\n\n        this.randomTile();\n        this.randomTile();\n\n        this.scoreDom = document.querySelector('#score');\n        this.bastScoreDom = document.querySelector('#bast-score');\n        this.scoreDom.innerHTML = 0;\n        this.bastScoreDom.innerHTML = this.bastScore;\n\n        var fetchDir = new _FetchDir2.default();\n        fetchDir.on('up', this.up.bind(this));\n        fetchDir.on('left', this.left.bind(this));\n        fetchDir.on('right', this.right.bind(this));\n        fetchDir.on('down', this.down.bind(this));\n        fetchDir.on('all', function () {\n            setTimeout(function () {\n                _this.randomTile();\n            }, 100);\n        });\n    }\n\n    _createClass(Game, [{\n        key: 'up',\n        value: function up() {\n            for (var x = 0; x < 4; x++) {\n                for (var y = 0; y < 4; y++) {\n                    if (this.tiles[x][y]) {\n                        this.tiles[x][y].moveToTop();\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'left',\n        value: function left() {\n            for (var x = 0; x < 4; x++) {\n                for (var y = 0; y < 4; y++) {\n                    if (this.tiles[x][y]) {\n                        this.tiles[x][y].moveToLeft();\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'right',\n        value: function right() {\n            for (var x = 0; x < 4; x++) {\n                for (var y = 3; y >= 0; y--) {\n                    if (this.tiles[x][y]) {\n                        this.tiles[x][y].moveToRight();\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'down',\n        value: function down() {\n            for (var x = 3; x >= 0; x--) {\n                for (var y = 0; y < 4; y++) {\n                    if (this.tiles[x][y]) {\n                        this.tiles[x][y].moveToDown();\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'randomTile',\n        value: function randomTile() {\n            if (this.count === 16) {\n                return;\n            }\n            var num = Math.floor(Math.random() * 100 % (16 - this.count));\n            var count = 0;\n            for (var i = 0; i < 4; i++) {\n                for (var j = 0; j < 4; j++) {\n                    if (this.tiles[i][j] == undefined) {\n                        if (count == num) {\n                            this.tiles[i][j] = new _Tile2.default(i, j, num % 2 === 0 ? 2 : 4);\n                            this.count++;\n                        }\n                        count++;\n                    }\n                }\n            }\n        }\n    }, {\n        key: 'addScore',\n        value: function addScore(score) {\n            this.score += score;\n            this.scoreDom.innerHTML = this.score;\n            if (this.score > this.bastScore) {\n                this.bastScore = this.score;\n                this.bastScoreDom.innerHTML = this.bastScore;\n                localStorage.setItem('bastScore', this.bastScore);\n            }\n        }\n    }]);\n\n    return Game;\n}();\n\nexports.default = Game;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _Game = __webpack_require__(0);\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\ndocument.addEventListener('touchmove', function (e) {\n\te.preventDefault();\n});\ntry {\n\tnew _Game2.default();\n} catch (e) {\n\talert(e);\n}\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _Game = __webpack_require__(0);\n\nvar _Game2 = _interopRequireDefault(_Game);\n\nvar _utils = __webpack_require__(3);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar colors = [{\n  fontSize: 55,\n  color: '#726C62',\n  bgColor: '#EFE7DE'\n}, {\n  fontSize: 55,\n  color: '#726C62',\n  bgColor: '#EFE3CE'\n}, {\n  fontSize: 55,\n  color: '#fff',\n  bgColor: '#F7B27B'\n}, {\n  fontSize: 46,\n  color: '#fff',\n  bgColor: '#F79663'\n}, {\n  fontSize: 46,\n  color: '#fff',\n  bgColor: '#F77D63'\n}, {\n  fontSize: 46,\n  color: '#fff',\n  bgColor: '#F76142'\n}, {\n  fontSize: 40,\n  color: '#fff',\n  bgColor: '#F76142'\n}, {\n  fontSize: 40,\n  color: '#fff',\n  bgColor: '#F29A39'\n}, {\n  fontSize: 40,\n  color: '#fff',\n  bgColor: '#E7CB5A'\n}, {\n  fontSize: 32,\n  color: '#fff',\n  bgColor: '#E7C74A'\n}, {\n  fontSize: 32,\n  color: '#fff',\n  bgColor: '#EFC229'\n}];\nvar block = document.querySelector('.grid-cell');\nvar size = block.offsetWidth;\nvar step = parseInt(document.defaultView.getComputedStyle(block, null)['marginRight']);\nif (step == 10) {\n  colors.forEach(function (item) {\n    item.fontSize = item.fontSize / 2;\n  });\n  size = 57.5;\n}\n\nvar Tile = function () {\n  function Tile(x, y, num) {\n    _classCallCheck(this, Tile);\n\n    this.x = x;\n    this.y = y;\n\n    this.setNum(num);\n\n    this.render();\n  }\n\n  _createClass(Tile, [{\n    key: 'gridToPx',\n    value: function gridToPx(x, y) {\n      return {\n        top: x * size + x * step,\n        left: y * size + y * step\n      };\n    }\n  }, {\n    key: 'moveTo',\n    value: function moveTo(x, y) {\n      var tiles = _Game2.default.getInstance().tiles;\n\n      var _gridToPx = this.gridToPx(x, y),\n          left = _gridToPx.left,\n          top = _gridToPx.top;\n\n      this.tileDom.style.transform = 'translate(' + left + 'px, ' + top + 'px)';\n      if (this.x != x || this.y != y) {\n        tiles[this.x][this.y] = null;\n        tiles[x][y] = this;\n      }\n      this.x = x;\n      this.y = y;\n    }\n  }, {\n    key: 'scale',\n    value: function scale() {\n      var _this = this;\n\n      var addAnimation = function addAnimation() {\n        _this.tileDom.children[0].style.animation = 'scale .2s';\n        _this.tileDom.removeEventListener('transitionend', addAnimation);\n      };\n      this.tileDom.addEventListener('transitionend', addAnimation);\n    }\n  }, {\n    key: 'setNum',\n    value: function setNum(newNum) {\n      var index = Math.log2(newNum) - 1;\n      this.backgroundColor = colors[index].bgColor;\n      this.color = colors[index].color;\n      this.fontSize = colors[index].fontSize;\n\n      if (this.num) {\n        var innerDom = this.tileDom.children[0];\n        innerDom.style.backgroundColor = this.backgroundColor;\n        innerDom.style.color = this.color;\n        innerDom.style.fontSize = this.fontSize;\n        innerDom.innerHTML = newNum;\n      }\n      this.num = newNum;\n    }\n  }, {\n    key: 'merge',\n    value: function merge(targetTile) {\n      _Game2.default.getInstance().addScore(targetTile.num * 2);\n      targetTile.moveTo(this.x, this.y);\n      targetTile.setNum(targetTile.num * 2);\n      targetTile.scale();\n      this.remove();\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      var tiles = _Game2.default.getInstance().tiles;\n      this.tileDom.remove();\n      _Game2.default.getInstance().count--;\n      delete this;\n    }\n  }, {\n    key: 'moveToRight',\n    value: function moveToRight() {\n      if (this.y == 3) return;\n      var tiles = _Game2.default.getInstance().tiles;\n      for (var y = this.y + 1; y < 4; y++) {\n        if (tiles[this.x][y] != null) {\n          if (tiles[this.x][y].num == this.num) {\n            tiles[this.x][y].merge(this);\n            return;\n          } else {\n            this.moveTo(this.x, y - 1);\n            return;\n          }\n        }\n      }\n      this.moveTo(this.x, 3);\n    }\n  }, {\n    key: 'moveToLeft',\n    value: function moveToLeft() {\n      if (this.y == 0) return;\n      var tiles = _Game2.default.getInstance().tiles;\n      for (var y = this.y - 1; y >= 0; y--) {\n        if (tiles[this.x][y] != null) {\n          if (tiles[this.x][y].num == this.num) {\n            tiles[this.x][y].merge(this);\n            return;\n          } else {\n            this.moveTo(this.x, y + 1);\n            return;\n          }\n        }\n      }\n      this.moveTo(this.x, 0);\n    }\n  }, {\n    key: 'moveToTop',\n    value: function moveToTop() {\n      if (this.x == 0) return;\n      var tiles = _Game2.default.getInstance().tiles;\n      for (var x = this.x - 1; x >= 0; x--) {\n        if (tiles[x][this.y] != null) {\n          if (tiles[x][this.y].num == this.num) {\n            tiles[x][this.y].merge(this);\n            return;\n          } else {\n            this.moveTo(x + 1, this.y);\n            return;\n          }\n        }\n      }\n      this.moveTo(0, this.y);\n    }\n  }, {\n    key: 'moveToDown',\n    value: function moveToDown() {\n      if (this.x == 3) return;\n      var tiles = _Game2.default.getInstance().tiles;\n\n      for (var x = this.x + 1; x < 4; x++) {\n        if (tiles[x][this.y] != null) {\n          if (tiles[x][this.y].num == this.num) {\n            tiles[x][this.y].merge(this);\n            return;\n          } else {\n            this.moveTo(x - 1, this.y);\n            return;\n          }\n        }\n      }\n      this.moveTo(3, this.y);\n    }\n  }, {\n    key: 'render',\n    value: function render(root) {\n      var rootDom = void 0;\n      switch (typeof root === 'undefined' ? 'undefined' : _typeof(root)) {\n        case 'string':\n          rootDom = document.querySelector(root);\n          break;\n        case 'object':\n          rootDom = root;\n          break;\n        case 'undefined':\n          rootDom = document.querySelector('#tile-list');\n          break;\n      }\n\n      var domStr = '\\n      <div class=\"tile-wrapper\">\\n        <div class=\\'tile\\' style=\\'background-color: ' + this.backgroundColor + ';font-size: ' + this.fontSize + 'px; color: ' + this.color + ';\\'>\\n          ' + this.num + '\\n        </div>\\n      </div>\\n    ';\n\n      this.tileDom = (0, _utils.strToDom)(domStr);\n\n      this.tileDom.children[0].addEventListener('animationend', function (e) {\n        e.target.style.animation = '';\n      });\n      this.moveTo(this.x, this.y);\n      rootDom.appendChild(this.tileDom);\n      this.scale();\n      return this;\n    }\n  }]);\n\n  return Tile;\n}();\n\nexports.default = Tile;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.strToDom = strToDom;\nfunction strToDom(domStr) {\n    var dom = document.createElement('div');\n    dom.innerHTML = domStr;\n    return dom.children[0];\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar FetchDir = function () {\n    function FetchDir() {\n        _classCallCheck(this, FetchDir);\n\n        this.cbs = {\n            up: [],\n            down: [],\n            left: [],\n            right: [],\n            all: []\n        };\n        this.mouseLastPoint = null;\n        var checkerboardDom = document.querySelector('#game-container');\n        checkerboardDom.addEventListener('mousedown', this.onTouchStart.bind(this));\n        checkerboardDom.addEventListener('mouseup', this.onTouchEnd.bind(this));\n        checkerboardDom.addEventListener('touchstart', this.onTouchStart.bind(this));\n        checkerboardDom.addEventListener('touchend', this.onTouchEnd.bind(this));\n    }\n\n    _createClass(FetchDir, [{\n        key: 'on',\n        value: function on(actionName, cb) {\n            if (this.cbs.hasOwnProperty(actionName)) {\n                this.cbs[actionName].push(cb);\n            }\n        }\n    }, {\n        key: 'onTouchStart',\n        value: function onTouchStart(e) {\n            this.mouseLastPoint = {\n                x: e.pageX ? e.pageX : event.changedTouches[0].clientX,\n                y: e.pageY ? e.pageY : event.changedTouches[0].clientY\n            };\n        }\n    }, {\n        key: 'onTouchEnd',\n        value: function onTouchEnd(e) {\n            if (!this.mouseLastPoint) {\n                return;\n            }\n            var dx = (e.pageX ? e.pageX : event.changedTouches[0].clientX) - this.mouseLastPoint.x;\n            var dy = (e.pageY ? e.pageY : event.changedTouches[0].clientY) - this.mouseLastPoint.y;\n            if (dx == 0 && dy == 0) {\n                return;\n            }\n            if (Math.abs(dx) > Math.abs(dy)) {\n                if (dx > 0) {\n                    this.cbs['right'].forEach(function (fn) {\n                        return fn();\n                    });\n                } else {\n                    this.cbs['left'].forEach(function (fn) {\n                        return fn();\n                    });\n                }\n            } else {\n                if (dy > 0) {\n                    this.cbs['down'].forEach(function (fn) {\n                        return fn();\n                    });\n                } else {\n                    this.cbs['up'].forEach(function (fn) {\n                        return fn();\n                    });\n                }\n            }\n            this.cbs['all'].forEach(function (fn) {\n                return fn();\n            });\n            this.mouseLastPoint = null;\n        }\n    }]);\n\n    return FetchDir;\n}();\n\nexports.default = FetchDir;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// app.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7d071495d469ea207ab9","import Tile from './Tile';\r\nimport FetchDir from './FetchDir';\r\nclass Game {\r\n    static getInstance () {\r\n        return Game._instance;\r\n    }\r\n    constructor () {\r\n        Game._instance = this;\r\n        this.tiles = [\r\n            new Array(4),\r\n            new Array(4),\r\n            new Array(4),\r\n            new Array(4)\r\n        ];\r\n        // 棋盘上棋子的个数\r\n        this.count = 0;\r\n        // 当前分数\r\n        this.score = 0;\r\n        // 最高分数\r\n        let bastScore = localStorage.getItem('bastScore');\r\n        this.bastScore =  bastScore ? bastScore : 0;\r\n        // 初始生成2个棋子\r\n        this.randomTile();\r\n        this.randomTile();\r\n        \r\n\r\n        this.scoreDom = document.querySelector('#score');\r\n        this.bastScoreDom = document.querySelector('#bast-score');\r\n        this.scoreDom.innerHTML = 0;\r\n        this.bastScoreDom.innerHTML = this.bastScore;\r\n\r\n        let fetchDir = new FetchDir();\r\n        fetchDir.on('up', this.up.bind(this));\r\n        fetchDir.on('left', this.left.bind(this));\r\n        fetchDir.on('right', this.right.bind(this));\r\n        fetchDir.on('down', this.down.bind(this));\r\n        fetchDir.on('all', () => {\r\n            setTimeout(() => {\r\n                this.randomTile();\r\n            }, 100);\r\n        });\r\n    }\r\n    up () {\r\n        for(let x = 0; x < 4; x++){\r\n            for(let y = 0; y < 4; y++){\r\n                if(this.tiles[x][y]){\r\n                    this.tiles[x][y].moveToTop();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    left () {\r\n        for(let x = 0; x < 4; x++){\r\n            for(let y = 0; y < 4; y++){\r\n                if(this.tiles[x][y]){\r\n                    this.tiles[x][y].moveToLeft();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    right () {\r\n        for(let x = 0; x < 4; x++){\r\n            for(let y = 3; y >= 0; y--){\r\n                if(this.tiles[x][y]){\r\n                    this.tiles[x][y].moveToRight();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    down () {\r\n        for(let x = 3; x >= 0; x--){\r\n            for(let y = 0; y < 4; y++){\r\n                if(this.tiles[x][y]){\r\n                    this.tiles[x][y].moveToDown();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // 随机生成棋子\r\n    randomTile () {\r\n        if(this.count === 16){\r\n            return;\r\n        }\r\n        let num = Math.floor( Math.random() * 100  % (16 - this.count));\r\n        let count = 0;\r\n        for (let i = 0; i < 4; i++) {\r\n            for (let j = 0; j < 4; j++) {\r\n                if(this.tiles[i][j] == undefined){\r\n                    if(count == num){\r\n                        this.tiles[i][j] = new Tile(i, j, num % 2 === 0 ? 2 : 4);\r\n                        this.count ++;\r\n                    }\r\n                    count ++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    addScore (score) {\r\n        this.score += score;\r\n        this.scoreDom.innerHTML = this.score;\r\n        if (this.score > this.bastScore) {\r\n            this.bastScore = this.score;\r\n            this.bastScoreDom.innerHTML = this.bastScore;\r\n            localStorage.setItem('bastScore', this.bastScore);\r\n        }\r\n    }\r\n}\r\n\r\nexport default Game;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Game.js","import Game from './Game';\r\ndocument.addEventListener('touchmove', function(e) {\r\n    e.preventDefault();\r\n});\r\ntry {\r\n\tnew Game()\t\r\n}catch(e){\r\n\talert(e);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Game from './Game';\r\nimport {strToDom} from './utils';\r\n\r\nlet colors = [\r\n    {//2\r\n      fontSize: 55,\r\n      color: '#726C62',\r\n      bgColor: '#EFE7DE'\r\n    },\r\n    {//4\r\n      fontSize: 55,\r\n      color: '#726C62',\r\n      bgColor: '#EFE3CE'\r\n    },\r\n    {//8\r\n      fontSize: 55,\r\n      color: '#fff',\r\n      bgColor: '#F7B27B'\r\n    },\r\n    {//16\r\n      fontSize: 46,\r\n      color: '#fff',\r\n      bgColor: '#F79663'\r\n    },\r\n    {//32\r\n      fontSize: 46,\r\n      color: '#fff',\r\n      bgColor: '#F77D63'\r\n    },\r\n    {//64\r\n      fontSize: 46,\r\n      color: '#fff',\r\n      bgColor: '#F76142'\r\n    },\r\n    {//128\r\n      fontSize: 40,\r\n      color: '#fff',\r\n      bgColor: '#F76142'\r\n    },\r\n    {//256\r\n      fontSize: 40,\r\n      color: '#fff',\r\n      bgColor: '#F29A39'\r\n    },\r\n    {//512\r\n      fontSize: 40,\r\n      color: '#fff',\r\n      bgColor: '#E7CB5A'\r\n    },\r\n    {//1024\r\n      fontSize: 32,\r\n      color: '#fff',\r\n      bgColor: '#E7C74A'\r\n    },\r\n    {//2048\r\n      fontSize: 32,\r\n      color: '#fff',\r\n      bgColor: '#EFC229'\r\n    }\r\n  ];\r\nlet block = document.querySelector('.grid-cell');\r\nlet size = block.offsetWidth;\r\nlet step = parseInt(document.defaultView.getComputedStyle(block, null)['marginRight']);\r\nif(step == 10){\r\n  // 手机\r\n  colors.forEach(item => {\r\n    item.fontSize = item.fontSize / 2;\r\n  })\r\n  size = 57.5;\r\n}\r\nclass Tile{\r\n  constructor (x, y, num) {\r\n    this.x = x;\r\n    this.y = y;\r\n        \r\n    this.setNum(num);\r\n\r\n    this.render();\r\n  }\r\n  gridToPx (x, y) {\r\n    return {\r\n      top: x * size + x * step,\r\n      left: y * size + y * step\r\n    };\r\n  }\r\n  moveTo (x, y) {\r\n    let tiles = Game.getInstance().tiles;\r\n\r\n    let {left, top} = this.gridToPx(x, y);\r\n\r\n    this.tileDom.style.transform = `translate(${left}px, ${top}px)`;\r\n    if(this.x != x || this.y != y){\r\n      tiles[this.x][this.y] = null;\r\n      tiles[x][y] = this;\r\n    }\r\n    this.x = x;\r\n    this.y = y;\r\n    \r\n  }\r\n  scale () {\r\n    let addAnimation = () => {\r\n      this.tileDom.children[0].style.animation = 'scale .2s';\r\n      this.tileDom.removeEventListener('transitionend', addAnimation);\r\n    }\r\n    this.tileDom.addEventListener('transitionend', addAnimation);\r\n  }\r\n  setNum (newNum) {\r\n    let index = Math.log2(newNum) - 1;\r\n    this.backgroundColor =  colors[index].bgColor;\r\n    this.color = colors[index].color;\r\n    this.fontSize = colors[index].fontSize;\r\n\r\n    if(this.num){\r\n      let innerDom = this.tileDom.children[0];\r\n      innerDom.style.backgroundColor = this.backgroundColor;\r\n      innerDom.style.color = this.color;\r\n      innerDom.style.fontSize = this.fontSize;\r\n      innerDom.innerHTML = newNum;\r\n    }\r\n    this.num = newNum;\r\n  }\r\n  merge (targetTile) {\r\n    Game.getInstance().addScore(targetTile.num * 2);\r\n    targetTile.moveTo(this.x, this.y);\r\n    targetTile.setNum(targetTile.num * 2);\r\n    targetTile.scale();\r\n    this.remove();\r\n  }\r\n  // 移除自己\r\n  remove () {\r\n    let tiles = Game.getInstance().tiles;\r\n    this.tileDom.remove();\r\n    Game.getInstance().count --;\r\n    delete this;\r\n  }\r\n  moveToRight () {\r\n    if(this.y == 3) return;\r\n    let tiles = Game.getInstance().tiles;\r\n    for(let y = this.y + 1; y < 4; y++){\r\n      if(tiles[this.x][y] != null){\r\n        if(tiles[this.x][y].num == this.num){\r\n          tiles[this.x][y].merge(this);\r\n          return;\r\n        }else{\r\n          this.moveTo(this.x, y - 1);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    this.moveTo(this.x, 3);\r\n  }\r\n  moveToLeft () {\r\n    if(this.y == 0) return;\r\n    let tiles = Game.getInstance().tiles;\r\n    for(let y = this.y - 1; y >= 0; y--){\r\n      if(tiles[this.x][y] != null){\r\n        if(tiles[this.x][y].num == this.num){\r\n          tiles[this.x][y].merge(this);\r\n          return;\r\n        }else{\r\n          this.moveTo(this.x, y + 1);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    this.moveTo(this.x, 0);\r\n  }\r\n  moveToTop(){\r\n    if(this.x == 0) return;\r\n    let tiles = Game.getInstance().tiles;\r\n    for(let x = this.x - 1; x >= 0;x --){\r\n      if(tiles[x][this.y] != null){\r\n        if(tiles[x][this.y].num == this.num){\r\n          tiles[x][this.y].merge(this);\r\n          return;\r\n        }else{\r\n          this.moveTo(x + 1, this.y);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    this.moveTo(0, this.y);\r\n  }\r\n  moveToDown(){\r\n    if(this.x == 3) return;\r\n    let tiles = Game.getInstance().tiles;\r\n    \r\n    for(let x = this.x + 1; x < 4; x++){\r\n      if(tiles[x][this.y] != null){\r\n        if(tiles[x][this.y].num == this.num){\r\n          tiles[x][this.y].merge(this);\r\n          return;\r\n        }else{\r\n          this.moveTo(x - 1, this.y);\r\n          return;\r\n        }\r\n      }\r\n    }\r\n    this.moveTo(3, this.y);\r\n  }\r\n  render (root) {\r\n    let rootDom;\r\n    switch(typeof root){\r\n      case 'string':\r\n        rootDom = document.querySelector(root);\r\n        break;\r\n      case 'object':\r\n        rootDom = root;\r\n        break;\r\n      case 'undefined':\r\n        rootDom = document.querySelector('#tile-list');\r\n        break;\r\n    }\r\n    \r\n\r\n    let domStr = `\r\n      <div class=\"tile-wrapper\">\r\n        <div class='tile' style='background-color: ${this.backgroundColor};font-size: ${this.fontSize}px; color: ${this.color};'>\r\n          ${this.num}\r\n        </div>\r\n      </div>\r\n    `;\r\n    \r\n    this.tileDom = strToDom(domStr);\r\n    \r\n    this.tileDom.children[0].addEventListener('animationend', (e) => {\r\n      e.target.style.animation = '';\r\n    })\r\n    this.moveTo(this.x, this.y);\r\n    rootDom.appendChild(this.tileDom);\r\n    this.scale();\r\n    return this;\r\n  }\r\n}\r\n\r\nexport default Tile;\n\n\n// WEBPACK FOOTER //\n// ./src/Tile.js","export function strToDom(domStr){\r\n    let dom = document.createElement('div');\r\n    dom.innerHTML = domStr;\r\n    return dom.children[0];\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","class FetchDir {\r\n    constructor () {\r\n        this.cbs = {\r\n            up: [],\r\n            down: [],\r\n            left: [],\r\n            right: [],\r\n            all: []\r\n        }\r\n        this.mouseLastPoint = null;\r\n        let checkerboardDom = document.querySelector('#game-container');\r\n        checkerboardDom.addEventListener('mousedown', this.onTouchStart.bind(this));\r\n        checkerboardDom.addEventListener('mouseup', this.onTouchEnd.bind(this));\r\n        checkerboardDom.addEventListener('touchstart', this.onTouchStart.bind(this));\r\n        checkerboardDom.addEventListener('touchend', this.onTouchEnd.bind(this));\r\n    }\r\n    on (actionName, cb) {\r\n        if(this.cbs.hasOwnProperty(actionName)){\r\n            this.cbs[actionName].push(cb);\r\n        }\r\n    }\r\n    onTouchStart (e) {\r\n        this.mouseLastPoint = {\r\n            x: e.pageX ? e.pageX : event.changedTouches[0].clientX,\r\n            y: e.pageY ? e.pageY : event.changedTouches[0].clientY,\r\n        };\r\n    }\r\n    onTouchEnd (e) {\r\n        if (!this.mouseLastPoint) {\r\n            return;\r\n        }\r\n        let dx = (e.pageX ? e.pageX : event.changedTouches[0].clientX) - this.mouseLastPoint.x;\r\n        let dy = (e.pageY ? e.pageY : event.changedTouches[0].clientY) - this.mouseLastPoint.y;\r\n        if(dx == 0 && dy == 0){\r\n            return;\r\n        }\r\n        if (Math.abs(dx) > Math.abs(dy)) {\r\n            // 左右\r\n            if(dx > 0){\r\n                // 右\r\n                this.cbs['right'].forEach(fn => fn());\r\n            }else{\r\n                // 左\r\n                this.cbs['left'].forEach(fn => fn());\r\n            }\r\n        } else {\r\n            // 上下\r\n            if(dy > 0){\r\n                // 下\r\n                this.cbs['down'].forEach(fn => fn());\r\n            }else{\r\n                // 上\r\n                this.cbs['up'].forEach(fn => fn());\r\n            }\r\n        }\r\n        this.cbs['all'].forEach(fn => fn());\r\n        this.mouseLastPoint = null;\r\n    }\r\n}\r\nexport default FetchDir;\n\n\n// WEBPACK FOOTER //\n// ./src/FetchDir.js"],"sourceRoot":""}